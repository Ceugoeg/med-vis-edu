# 组员A实现与版本更新汇总（V1）

## 1. 我作为组员A已实现的内容

### 1.1 核心职责交付（严格按 `window.handData` 对接）
- 已实现 MediaPipe Hands 摄像头采集并持续发布全局数据：

```js
window.handData = {
  state: 'OPEN' | 'FIST' | 'PINCH' | 'NONE',
  landmarks: [ { x, y, z }, ...共21个 ],
  confidence: 0.0 ~ 1.0
};
```

- 已实现手势识别：`PINCH / OPEN / FIST / NONE`
- 已实现一阶滞后滤波（默认 `alpha=0.2`）用于坐标平滑
- 已实现状态稳态提交机制（`stateHoldFrames`）
- 已实现与主流程解耦：仅通过 `window.handData` 交接，不改 3D 渲染主逻辑

### 1.2 联调与运行支持
- 已实现输入源切换：mock / mediapipe
- 已实现 MediaPipe 启动失败回退到 `drivers/mock_hands.js`
- 已提供独立验证页面：`demo_index.html`
- 已提供快速说明文档与任务管理文档（四状态）

---

## 2. 当前版本更新（截至本次）

### Task-01：成员A感知模块落地
- 新建目录：`mediapipe-sense`
- 新增核心发布器：`mediapipe_hand_publisher.js`
- 新增验证入口：`demo_index.html` + `demo_bootstrap.js`
- 新增文档：`README.md`、`tasks_mediapipe_sense.md`

### Task-02：主流程联调接入
- 在入口层完成 mock/mediapipe 驱动切换
- 保持 `app.js` 主逻辑不改，符合交接约束

### Task-03：联调缺陷修复
- 修复运行时路径解析（避免 `currentScript` 异步丢失带来的路径错误）
- 修正默认坐标策略（`flipY=false`，与当前主工程 NDC 转换一致）
- 增加启动失败回退机制（自动加载 mock 驱动）

### Task-04：时序稳定性优化（针对C联调反馈）
- 新增滑动窗口投票（`stateVoteWindow`，默认 7）
- 新增离开 `FIST/PINCH` 的 `OPEN` 确认门槛（`openConfirmFramesAfterAction`，默认 3）
- 在未达确认门槛时输出中性态 `NONE`，支持连续 `FIST -> NONE -> FIST`
- 保持状态契约不变（仍是四态，不引入新枚举）

---

## 3. 当前关键参数（默认）
- `smoothingAlpha: 0.2`
- `stateVoteWindow: 7`
- `openConfirmFramesAfterAction: 3`
- `stateHoldFrames: 2`
- `pinchThreshold: 0.055`
- `flipY: false`

---

## 4. 与项目体系的关系
- `mediapipe-sense`：A 的独立可复用模块与文档中心
- `med-vis-edu-main`：主线工程，通过入口脚本接入 A 模块
- `med-vis-edu-feat-integrate-mediapipe`：测试分枝（联调服），内置了 `drivers/mediapipe-sense` 副本用于验证

---

## 5. 当前状态结论
- A 侧核心功能已完成并可联调运行
- 已覆盖 C 提出的两类时序问题（过渡毛刺、连续动作触发困难）
- 当前版本可用于继续做实机阈值回归（不同光照、距离、手势习惯）
